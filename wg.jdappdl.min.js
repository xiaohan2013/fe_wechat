! function() {
	function a(a) {
		var b = new RegExp("(^| )" + a + "(?:=([^;]*))?(;|$)"),
			c = document.cookie.match(b);
		return c ? c[2] ? unescape(c[2]).replace(/(^")|("$)/g, "") : "" : null
	}

	function b(a, b, c, d, e, f) {
		var g = new Date,
			c = arguments[2] || null,
			d = arguments[3] || "/",
			e = arguments[4] || null,
			f = arguments[5] || !1;
		c ? g.setMinutes(g.getMinutes() + parseInt(c)) : "", document.cookie = a + "=" + escape(b) + (c ? ";expires=" + g.toGMTString() : "") + (d ? ";path=" + d : "") + (e ? ";domain=" + e : "") + (f ? ";secure" : "")
	}

	function c(a, b) {
		var c = arguments[1] || window.location.search,
			d = new RegExp("(^|&)" + a + "=([^&]*)(&|$)"),
			e = c.substr(c.indexOf("?") + 1).match(d);
		return null != e ? e[2] : ""
	}

	function d(a) {
		function b() {
			d.hasInit || (d.counter = setInterval(function() {
				window.ECC_cloud_report_pv && (clearInterval(d.counter), d.counter = 0, c())
			}, 80), d.hasInit = !0)
		}

		function c() {
			e.length && (window.ja && window.ja.logGoodsExposure(e.join("_")), d.goodsExposureList = e = [])
		}
		if (a) {
			!d.goodsExposureList && (d.goodsExposureList = []), !Array.isArray(a) && (a = [a]);
			var e = d.goodsExposureList;
			[].push.apply(e, a), window.ECC_cloud_report_pv ? c() : b()
		}
	}

	function e() {
		var a = navigator.userAgent.match(/qq\/(\d+\.\d+)/i),
			b = 0;
		return a && a.length >= 2 && (b = parseFloat(a[1]) || 0), b
	}

	function f(a, b) {
		var c, d = {
			onLoad: null,
			onError: null,
			onTimeout: null,
			timeout: 8e3,
			isToken: !0,
			charset: "utf-8"
		};
		if (1 == arguments.length && ("object" == typeof arguments[0] ? (b = arguments[0], a = b.url) : b = {}), "object" == typeof b.data) {
			var e = [];
			for (var f in b.data) e.push(f + "=" + b.data[f]);
			e.length > 0 && (e = e.join("&"), a += (a.indexOf("?") > 0 ? "&" : "?") + e)
		}
		for (var h in b) b.hasOwnProperty(h) && (d[h] = b[h]);
		var i = document.createElement("script");
		i.charset = d.charset || "utf-8", i.onload = i.onreadystatechange = function() {
			(/loaded|complete/i.test(this.readyState) || -1 == navigator.userAgent.toLowerCase().indexOf("msie")) && (d.onLoad && d.onLoad(), j())
		}, i.onerror = function() {
			d.onError && d.onError(), j()
		}, i.src = d.isToken ? g(a, "ls") : a, document.getElementsByTagName("head")[0].appendChild(i), "function" == typeof d.onTimeout && (c = setTimeout(function() {
			d.onTimeout()
		}, d.timeout));
		var j = function() {
			i && (c && clearTimeout(c), i.onload = i.onreadystatechange = i.onerror = null, i.parentNode && i.parentNode.removeChild(i), i = null)
		}
	}

	function g(a, b) {
		var c = h();
		if ("" == a || 0 != (a.indexOf("://") < 0 ? location.href : a).indexOf("http")) return a;
		if (-1 != a.indexOf("#")) {
			var d = a.match(/\?.+\#/);
			if (d) {
				var e = d[0].split("#"),
					f = [e[0], "&g_tk=", c, "&g_ty=", b, "#", e[1]].join("");
				return a.replace(d[0], f)
			}
			var e = a.split("#");
			return [e[0], "?g_tk=", c, "&g_ty=", b, "#", e[1]].join("")
		}
		return "" == c ? a + (-1 != a.indexOf("?") ? "&" : "?") + "g_ty=" + b : a + (-1 != a.indexOf("?") ? "&" : "?") + "g_tk=" + c + "&g_ty=" + b
	}

	function h() {
		var b = a("wq_skey"),
			c = null == b ? "" : i(b);
		return c
	}

	function i(a) {
		for (var b = 0, c = a.length, d = 5381; c > b; ++b) d += (d << 5) + a.charAt(b).charCodeAt();
		return 2147483647 & d
	}

	function j() {
		mqq.build("mqq.app.isAppInstalled", {
			iOS: function(a, b) {
				return mqq.invoke("app", "isInstalled", {
					scheme: a
				}, b)
			},
			android: function(a, b) {
				mqq.invoke("QQApi", "isAppInstalled", a, b)
			},
			support: {
				iOS: "4.2",
				android: "4.2"
			}
		})
	}

	function k() {
		var a = location.href,
			b = "";
		a.indexOf("wq.jd.com/mcoss/mportal/show") > -1 && a.indexOf("tpl=7") > -1 && a.indexOf("tabid=6") > -1 || a.indexOf("http://wqs.jd.com/data/coss/tolerant") > -1 && a.indexOf("1_1.shtml") > -1 ? b = 13 : a.indexOf("wq.jd.com/mcoss/mportal/show") > -1 && a.indexOf("tpl=8") > -1 && a.indexOf("tabid=8") > -1 || a.indexOf("http://wqs.jd.com/data/coss/tolerant") > -1 && a.indexOf("2_1.shtml") > -1 ? b = 14 : a.indexOf("http://wqs.jd.com/portal/sq/guang/guang_index.shtml") > -1 || a.indexOf("http://wqs.jd.com/data/coss/tolerant") > -1 && a.indexOf("3_1.shtml") > -1 ? b = 15 : a.indexOf("wqs.jd.com/portal/sq/worth/index.shtml") > -1 || a.indexOf("http://wqs.jd.com/data/coss/tolerant") > -1 && a.indexOf("4_1.shtml") > -1 ? b = 16 : a.indexOf("wqs.jd.com/portal/sq/clothing/clothing_index_sq.shtml") > -1 ? b = 17 : a.indexOf("wqs.jd.com/portal/sq/clothing/clothing_index_man_sq.shtml") > -1 ? b = 18 : a.indexOf("wq.jd.com/mcoss/mmart/show") > -1 && a.indexOf("tpl=9") > -1 ? b = 19 : a.indexOf("wq.jd.com/mcoss/mmart/show") > -1 && a.indexOf("tpl=10") > -1 ? b = 13 : a.indexOf("wqs.jd.com/portal/wx/lady/ladyPrice.shtml") > -1 ? b = 14 : a.indexOf("http://wqs.jd.com/portal/wx/lady/ladySub.shtml") > -1 ? b = 15 : (a.indexOf("http://wqs.jd.com/portal/wx/microstore.shtml") > -1 || a.indexOf("http://wqs.jd.com/data/coss/tolerant") > -1 && a.indexOf("8_1.shtml") > -1) && (b = 16), b && (window._jdApp = {
			index: 9,
			androidindex: b,
			closeHide: !1,
			appdlCon: "appdlCon",
			fixed: !1
		})
	}

	function l() {
		E && (f("http://wq.360buyimg.com/data/ppms/js/ppms.page19667.jsonp?t=1"), window.showPageData19667 = function(a) {
			if (a.data || a.data.length > 0) {
				for (var b = 0; b < a.data.length; b++) {
					var c = a.data[b],
						d = c.env + c.envValue,
						e = new Object;
					e.imgSrc = c.imgSrc, e.resources = c.resources, e.MD5 = c.MD5, e.androidRD = c.androidRD, e.androidCloseRD = c.androidCloseRD, e.IOSRD = c.IOSRD, e.IOSCloseRD = c.IOSCloseRD, e.jumpUrl = c.jumpUrl, M[d] = e
				}
				"1" === D || "2" === D || window._jdApp.ignoreWx === !0 ? ("2" === D ? r() : q(), B = !0) : x ? window.WeixinJSBridge && WeixinJSBridge.invoke ? m() : document.addEventListener("WeixinJSBridgeReady", m, !1) : window._jdApp.sqShow !== !1 && y && JD.sqapi.ready(o), window._jdApp.reload = u
			}
		})
	}

	function m() {
		E >= 12 ? n() : WeixinJSBridge.invoke("getInstallState", {
			packageName: "com.jingdong.app.mall",
			packageUrl: "openApp.jdMobile://"
		}, function(a) {
			var b = a.err_msg;
			b.indexOf("get_install_state:no") > -1 ? (q(), B = !0) : (localStorage.removeItem("jdapp_download_id"), n())
		})
	}

	function n(a) {
		WeixinJSBridge.invoke("getInstallState", {
			packageName: "com.jd.wxsq.app",
			packageUrl: "wxe3384655cdb13ab6://"
		}, function(b) {
			var c = b.err_msg;
			c.indexOf("get_install_state:no") > -1 ? a ? window.setTimeout(function() {
				n(!0)
			}, 1e3) : (r(), B = !0) : a ? t() : localStorage.removeItem("jzapp_download_id")
		})
	}

	function o() {
		if (!(0 >= E || 9 > C) && window.mqq && window.mqq.app && window.mqq.app.isAppInstalled)
			if (E >= 12) p();
			else {
				var a = "";
				a = z ? "com.jingdong.app.mall" : "openApp.jdMobile", mqq.app.isAppInstalled(a, function(a) {
					a ? p() : (q(), B = !0)
				})
			}
	}

	function p(a) {
		var b = "";
		b = z ? "com.jd.wxsq.app" : "wxe3384655cdb13ab6", mqq.app.isAppInstalled(b, function(b) {
			b ? a && t() : a ? window.setTimeout(function() {
				p(!0)
			}, 1e3) : (r(), B = !0)
		})
	}

	function q() {
		if (w = M[K]) {
			A = 1;
			var a = "";
			switch (C) {
				case 1:
				case 2:
				case 3:
				case 4:
				case 5:
				case 6:
				case 7:
				case 8:
				case 9:
				case 10:
					a = '<div class="mod_dlbar" id="jdappDownloadBlock" style="display:none;"><a href="javascript:" class="mod_dlbar_inner"><img src=' + w.imgSrc + '><span id="jdAppDownloadClose"></span></a></div>'
			}
			if (a) {
				var b = document.createElement("div");
				if (b.id = "jdappdlOutter", b.innerHTML = a, window._jdApp.initHide === !0 && (b.style.display = "none"), window._jdApp.appdlCon) {
					var c = document.getElementById(window._jdApp.appdlCon);
					c && c.appendChild(b)
				} else if (document.body.appendChild(b), 9 == C) {
					var d = document.getElementById("jdappDownloadBlock");
					d && (d.style.marginBottom = "49px")
				}
				s()
			}
		}
	}

	function r() {
		if (w = M[L], w && (!x || 9 != E && 10 != E) && (!y || 3 == E || 8 == E || E >= 12)) {
			A = 2;
			var a = "";
			switch (C) {
				case 9:
				case 10:
					a = '<div class="mod_dlbar" id="jdappDownloadBlock" style="display:none;"><a href="javascript:" class="mod_dlbar_inner"><img src=' + w.imgSrc + '><span id="jdAppDownloadClose"></span></a></div>'
			}
			if (a) {
				var b = document.createElement("div");
				if (b.id = "jdappdlOutter", b.innerHTML = a, window._jdApp.initHide === !0 && (b.style.display = "none"), window._jdApp.appdlCon) {
					var c = document.getElementById(window._jdApp.appdlCon);
					c && c.appendChild(b)
				} else if (document.body.appendChild(b), 9 == C) {
					var d = document.getElementById("jdappDownloadBlock");
					d && (d.style.marginBottom = "49px")
				}
				s()
			}
		}
	}

	function s() {
		function c() {
			k.removeEventListener("click", c);
			var a, b, d;
			a = w.resources, b = w.MD5, d = "京东客户端", 2 == A && (d = "京致客户端"), WeixinJSBridge.invoke("addDownloadTask", {
				task_name: d,
				task_url: a,
				file_md5: b
			}, function(a) {
				msg = a.err_msg, download_id = a.download_id, msg.indexOf("add_download_task:ok") > -1 && (2 == A ? localStorage.setItem("jzapp_download_id", download_id) : localStorage.setItem("jdapp_download_id", download_id), f(download_id))
			})
		}

		function f(a) {
			C >= 9 && (k.removeEventListener("click", c), k.className = "mod_dlbar download" + (window._jdApp.fixed === !0 ? " fixed" : ""), WeixinJSBridge.on("wxdownload:state_change", function(b) {
				if (b.download_id == a && "download_succ" == b.state) {
					l && (l.style.display = "none");
					var d = document.getElementById("jdappdlOutter");
					d && d.parentNode.removeChild(d), 2 == A && n(!0)
				} else k.className = "mod_dlbar" + (window._jdApp.fixed === !0 ? " fixed" : ""), k.addEventListener("click", c)
			}))
		}

		function g(a) {
			C >= 9 && (2 == A ? n(!0) : k.className = "mod_dlbar" + (window._jdApp.fixed === !0 ? " fixed" : ""), k.addEventListener("click", function() {
				WeixinJSBridge.invoke("installDownloadTask", {
					download_id: a
				}, function(a) {
					jdappOUtter && jdappOUtter.parentNode.removeChild(jdappOUtter)
				})
			}))
		}

		function h(a) {
			var b = !0,
				c = 2 == A ? I : H;
			a.length > 0 && (a = a[0], "2" == a.state ? (k.className = "mod_dlbar download" + (window._jdApp.fixed === !0 ? " fixed" : ""), b = !1) : "4" == a.state && (c.actionCode = "5", 2 == A && p(!0))), b && k.addEventListener("click", i), JsBridge.callMethod("q_download", "registerDownloadCallBackListener", "window.CallBackMethod"), window.CallBackMethod = function(a) {
				a instanceof Array && (a = a[0]);
				var b = document.getElementById("jdappdlOutter");
				a.pro > "90" && b && b.parentNode.removeChild(b), "2" != a.state || ~k.className.indexOf("downloading") ? "4" == a.state && (c.actionCode = "5", b && b.parentNode.removeChild(b), 2 == A && p(!0)) : (k.removeEventListener("click", i), k.className = "mod_dlbar download" + (window._jdApp.fixed === !0 ? " fixed" : ""), 2 == A && p(!0))
			}
		}

		function i() {
			var a, b = H,
				c = F;
			a = w.resources, 2 == A && (b = I, c = G);
			var d = {
				appid: b.appid,
				url: a,
				packageName: b.packageName,
				actionCode: b.actionCode,
				versionCode: b.versionCode,
				myAppConfig: "0",
				isAutoDownload: "1",
				isAutoInstall: "1",
				toPageType: "0"
			};
			c[E - 1] && (d.channelid = c[E - 1]), JsBridge.callMethod("q_download", "doDownloadAction", JSON.stringify(d))
		}
		var j = a("jd_app_dlclose");
		if (!j) {
			var k = document.getElementById("jdappDownloadBlock"),
				l = document.getElementById("jdappDownloadBlock");
			if (5 == C && (l.style.margin = "0 10px"), k) {
				if (w.jumpUrl && k.addEventListener("click", function() {
						window.location = w.jumpUrl
					}), z && !w.jumpUrl)
					if (E > 0 && C >= 9 && (x || y && e() >= 4.7 && window.JsBridge))
						if (k.href = "javascript:;", y) JsBridge.callMethod("q_download", "getQueryDownloadAction", JSON.stringify({
							guid: 1,
							infolist: [2 == A ? I : H]
						}));
						else {
							var m = 2 == A ? localStorage.getItem("jzapp_download_id") : localStorage.getItem("jdapp_download_id");
							m ? WeixinJSBridge.invoke("queryDownloadTask", {
								download_id: m
							}, function(a) {
								"downloading" == a.state ? f(m) : "download_succ" == a.state ? g(m) : k.addEventListener("click", c)
							}) : k.addEventListener("click", c)
						} else k.addEventListener("click", function() {
					2 == A ? window.location = "http://wqs.jd.com/app/apk/jzyc-wx.apk" : window.location = window._jdApp.androidUrl || "http://storage.jd.com/jdmobile/jd-wxmall.apk"
				});
				else w.jumpUrl || k.addEventListener("click", function() {
					2 == A ? window.location = "https://itunes.apple.com/cn/app/jingzhiyichu/id995205628?mt=8" : window.location = window._jdApp.iosUrl || "https://itunes.apple.com/cn/app/jing-dong/id414245413?mt=8"
				});
				if (z) {
					var o = w.androidRD;
					o || (o = window._jdApp.androidRd), o && k.setAttribute("ptag", o), o && d(o)
				} else {
					var q = w.IOSRD;
					q || (q = window._jdApp.iosRd), q && k.setAttribute("ptag", q), q && d(q)
				}
			}
			if (l && (l.style.display = ""), window._jdApp.fixed === !0 ? 3 != C && (l.className = l.className + " fixed") : window._jdApp.fixed === !1 && 3 == C && (l.className = l.className.replace("fixed", "")), window._jdApp.closeHide) {
				var r = document.getElementById("jdAppDownloadClose");
				r && r.parentNode.removeChild(r)
			} else {
				var r = document.getElementById("jdAppDownloadClose"),
					s = 10080;
				if (r)
					if (r.addEventListener("click", function(a) {
							l = document.getElementById("jdappDownloadBlock"), l && (l.style.display = "none"), b("jd_app_dlclose", "1", s, "/", "jd.com"), a.preventDefault(), a.stopPropagation()
						}), r.style.display = "", z) {
						var t = w.androidCloseRD;
						t && r.setAttribute("ptag", t)
					} else {
						var t = w.IOSCloseRD;
						t && r.setAttribute("ptag", t)
					}
			}
			window.QzoneApp = {}, QzoneApp.fire = function(a, b) {
				if (0 == b.r && "interface.getQueryDownloadAction" == a) {
					var c = b.data;
					h(c)
				}
			}
		}
	}

	function t() {
		var a = document.createElement("iframe"),
			b = document.createElement("a");
		if (b.style.display = "none", a.style.display = "none", document.body.appendChild(a), document.body.appendChild(b), y) {
			b.href = "com.jd.jzyc://mainPage?param=" + encodeURIComponent(JSON.stringify({
				tab: 1
			}));
			var c = document.createEvent("MouseEvents");
			c.initEvent("click", !1, !1), b.dispatchEvent(c)
		} else a.src = "com.jd.jzyc://mainPage?param=" + encodeURIComponent(JSON.stringify({
			tab: 1
		}))
	}

	function u() {
		C = window._jdApp.index || 3, E = window._jdApp.androidindex || 0;
		K = J + "App" + E, L = J + "JzApp" + E;
		var a = document.getElementById("jdappdlOutter");
		a && a.parentNode.removeChild(a), B && (K = J + "App" + E, L = J + "JzApp" + E, 2 == A ? r() : q())
	}

	function v() {
		l()
	}
	y && JD.sqapi.ready(j), k();
	var w, x = /MicroMessenger/i.test(navigator.userAgent),
		y = /qq\/([\d\.]+)*/i.test(navigator.userAgent),
		z = navigator.userAgent.indexOf("Android") > -1,
		A = (!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), 1),
		B = !1,
		C = window._jdApp.index || 10,
		D = c("appdlDebug"),
		E = window._jdApp.androidindex || 0,
		F = ["", "", "000116083230343436373732", "", "", "", "", "000116083230343435353334", "", "", "", "", "", "", "", "", "", "", ""],
		G = [],
		H = {
			appid: "100838841",
			packageName: "com.jingdong.app.mall",
			versionCode: "11583",
			actionCode: "2"
		},
		I = {
			appid: "1104340788",
			packageName: "com.jd.wxsq.app",
			versionCode: "26",
			actionCode: "2"
		},
		J = "",
		K = "",
		L = "",
		M = {};
	J = x ? "wx" : "sq", K = J + "App" + E, L = J + "JzApp" + E, v()
}();