! function() {
	function a(a) {
		var b = a.style.display;
		"none" == b && (a.style.display = "");
		var c = a.getBoundingClientRect(),
			d = c.height ? c.height : c.bottom - c.top;
		return a.style.display = b, d
	}

	function b(a, b) {
		if (a) {
			var c;
			return (!window._loadCss || window._loadCss.indexOf(a) < 0) && (c = document.createElement("link"), c.setAttribute("type", "text/css"), c.setAttribute("rel", "stylesheet"), c.setAttribute("href", a), c.setAttribute("id", "loadCss" + Math.random()), document.getElementsByTagName("head")[0].appendChild(c), window._loadCss ? window._loadCss += "|" + a : window._loadCss = "|" + a), c && "function" == typeof b && (c.onload = b), !0
		}
	}

	function c(a) {
		function b() {
			c && (c.onload = c.onreadystatechange = c.onerror = null, c.parentNode && c.parentNode.removeChild(c), c = null)
		}
		a.element = a.element || "script";
		var c = document.createElement(a.element);
		c.charset = a.charset || "utf-8", a.onBeforeSend && a.onBeforeSend(c), c.onload = c.onreadystatechange = function() {
			(/loaded|complete/i.test(this.readyState) || -1 == navigator.userAgent.toLowerCase().indexOf("msie")) && (a.onLoad && a.onLoad(), b())
		}, c.onerror = function() {
			b()
		}, c.src = a.url, document.getElementsByTagName("head")[0].appendChild(c)
	}

	function d() {
		if (!p) {
			var a = document.createElement("div");
			if (a.className = "mod_foot" + (1 === window._searchfoot.index ? " mod_foot_qq" : ""), a.innerHTML = o.replace("{#placeholder#}", window._searchfoot.placeholder ? window._searchfoot.placeholder : "").replace("{#btnPtag#}", window._searchfoot.btnPtag ? window._searchfoot.btnPtag : "").replace("{#inpRd#}", window._searchfoot.inpPtag ? window._searchfoot.inpPtag : ""), window._searchfoot.con) {
				var b = document.getElementById(window._searchfoot.con);
				b && b.appendChild(a)
			} else document.body.appendChild(a);
			e(), g(), h(), p = !0
		}
	}

	function e() {
		var a = document.getElementById("search_foot_btn"),
			b = document.getElementById("search_foot_keyword");
		a && a.addEventListener("click", function() {
			f(b.value)
		});
		var c = document.getElementById("btmSearchForm");
		c.addEventListener("submit", function(a) {
			a.preventDefault(), f(b.value)
		});
		var d = !1,
			e = !1;
		document.addEventListener("touchstart", function(a) {
			e = a.target != b ? !0 : !1
		}, !1), b.addEventListener("focus", function() {
			var a = b.getAttribute("chnname");
			a && b.setAttribute("placeholder", a), d = !0, window.setTimeout(function() {
				d = !1
			}, 500)
		}), b.addEventListener("blur", function() {
			var a = b.getAttribute("chnname");
			a && b.setAttribute("placeholder", "搜索更多 " + a + " 相关商品")
		}), window.addEventListener("scroll", function() {
			d || document.activeElement && document.activeElement === b && e === !0 && b.blur()
		});
		var h = document.getElementById("search_foot_suggest");
		h.addEventListener("click", function(a) {
			var b = a.target;
			if ("li" != b.tagName.toLowerCase() && (b = b.parentNode), "li" == b.tagName.toLowerCase()) {
				~b.className.indexOf("refresh") ? g() : window._searchfoot.autoSt && m();
				var c = b.getAttribute("tourl");
				c && window.setTimeout(function() {
					location.href = c
				}, 200)
			}
		})
	}

	function f(a) {
		var a = a.replace(/^\s*|\s*$/g, "");
		if ("" === a && s && q) {
			var b = document.getElementById("search_foot_keyword");
			a = b.getAttribute("chnname") || ""
		}
		"" !== a && (window._searchfoot.autoSt && m(a), j(), window.setTimeout(function() {
			location.href = r.replace("{#key#}", encodeURIComponent(a)).replace("{#ptag#}", window._searchfoot.searchrd ? window._searchfoot.searchrd : "37128.7.12")
		}, 100))
	}

	function g() {
		if (window._searchfoot.mpj) {
			var b = "http://wq.360buyimg.com/data/coss/keyword/project/" + window._searchfoot.mpj + ".jsonp",
				d = window._searchfoot.mpj.replace(/^m/, ""),
				e = document.getElementById("search_foot_suggest");
			e.style.maxHeight = "none", window[d] = function(b) {
				if (0 == b.errCode) {
					var c = [],
						d = [];
					if (b.keywordAreas)
						for (var f = 0, g = b.keywordAreas.length; g > f; ++f) {
							var h = b.keywordAreas[f];
							if (h && h.level1words)
								for (var i = 0, j = h.level1words.length; j > i; ++i) d = d.concat(h.level1words[i].level2words)
						}
					d.sort(function() {
						return parseInt(10 * Math.random() - 5, 10)
					});
					var k = 10;
					window._searchfoot.hotLimit && (k = parseInt(window._searchfoot.hotLimit || 10, 10));
					for (var d = d.slice(0, k), f = 0, g = d.length; g > f; ++f) {
						var l = d[f];
						if (window._searchfoot.hotrd)
							if (/ptag=/i.test(l.url)) l.url = l.url.replace(/ptag=\d+(\.\d+)?(\.\d+)?/i, "PTAG=" + window._searchfoot.hotrd);
							else {
								var m = l.url.indexOf("?") > -1 ? "&" : "?";
								l.url += m + "PTAG=" + window._searchfoot.hotrd
							}
						c.push('<li tourl="' + l.url + '"><a href="javascript:">' + l.keyword + "</a></li>")
					}
					if (c.length > 0) {
						var n = window._searchfoot.changeRd ? window._searchfoot.changeRd : "37128.7.13";
						c.push('<li ptag="' + n + '" class="mark_refresh"><span ptag="' + n + '">换一批</span></li>'), e.innerHTML = c.join(""), e.style.display = "", e.style.maxHeight = a(e) + "px"
					}
				}
			}, c({
				url: b,
				charset: "gbk"
			})
		}
	}

	function h() {
		if (s) {
			var a = "http://bases.wanggou.com/mcoss/brand/query?callback=searBtnBrandCb&bids=" + window._searchfoot.brandId + "&platform=" + (2 === window._searchfoot.index ? 1 : 2);
			window.searBtnBrandCb = function(a) {
				if (0 === a.errno && a.brand && 0 != a.brand.length) {
					var b = a.brand[0],
						c = document.getElementById("search_foot_keyword");
					b.chn_name && (c.setAttribute("placeholder", "搜索更多 " + b.chn_name + " 相关商品"), c.setAttribute("chnname", b.chn_name)), q = !0
				}
			}, c({
				url: a
			})
		}
	}

	function i() {
		var a = document.body.scrollTop,
			b = document.body.scrollHeight,
			c = window.screen.availHeight;
		a >= b - c - 180 && (window.removeEventListener("scroll", i), d())
	}

	function j() {
		if (window._searchfoot.searchEnrd) try {
			window.ja.log("wg_wx.000001", {
				logid: window.jdPvLog.envData.logid,
				target: window._searchfoot.searchEnrd
			})
		} catch (a) {}
	}

	function k() {
		if (!JD.cookie) return !1;
		var a = 0,
			b = JD.cookie.get("visitkey"),
			c = (b || "0").substr(-2),
			d = parseInt(c, 10);
		return "undefined" != typeof window.smartboxGrayStrategy && (a = window.smartboxGrayStrategy), 99 == a || a && d && a >= d
	}

	function l() {
		var a = JD.url.getHashParam("st");
		a > 0 && (d(), window.setTimeout(function() {
			window.scrollTo(0, a)
		}, 50))
	}

	function m() {
		var a = JD.url.getHash(),
			b = JD.url.getHashParam("st");
		a = b ? a.replace(/st=\d+/, "st=" + document.body.scrollTop) : a + (a ? "&" : "") + "st=" + document.body.scrollTop, JD.url.setHash(a)
	}

	function n() {
		window.closeSearchEntrance || (b(window._searchfoot.css || "http://wq.360buyimg.com/fd/base/css/base/mod_foot.s.min.css?t=20150813"), window._searchfoot.isapp ? r = r.replace(/http\:\/\/wqs\.jd\.com\/search\/index\.shtml/g, "http://wqs.jd.com/app/search/style13/search.shtml") : k() && (r = r.replace(/http\:\/\/wqs\.jd\.com\/search\/index\.shtml/g, "http://wq.jd.com/search/search")), window._searchfoot.load = d, window._searchfoot.manual !== !0 && window.addEventListener("scroll", i), window._searchfoot.autoSt && l())
	}
	var o = (/MicroMessenger/i.test(navigator.userAgent), '<div class="mod_foot_search"><div class="form"><form id="btmSearchForm"><input class="text" id="search_foot_keyword" type="search" autocomplete="off" placeholder="{#placeholder#}" ptag="{#inpRd#}"><input class="btn" type="button" id="search_foot_btn" ptag="{#btnPtag#}" value="搜索"></form></div><ul class="tags" id="search_foot_suggest" style="display:none;"></ul></div>'),
		p = !1,
		q = !1,
		r = "http://wqs.jd.com/search/index.shtml?key={#key#}&as=1&PTAG={#ptag#}",
		s = window._searchfoot.brandId && "0" !== window._searchfoot.brandId;
	n()
}();