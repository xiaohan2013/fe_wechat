! function() {
	function a(a) {
		var b;
		b = document.createElement("link"), b.setAttribute("type", "text/css"), b.setAttribute("rel", "stylesheet"), b.setAttribute("href", a), b.defer = "defer", b.async = "async", document.getElementsByTagName("head")[0].appendChild(b)
	}

	function b() {
		return ['<div class="qq_menu_v2" id="_divqqmenu">', '<ul id="__ulqqmenu">', "             <li>", '                <a href="javascript:;" ptag="37128.1.2" id="__homepage">', '                    <i class="icon_home"></i>', "                    <span>购物</span>", "                </a>", "            </li>", "            <li>", '                <a href="http://wqs.jd.com/portal/sq/category_q.shtml?_wv=1&ptag=37128.1.3">', '                <i class="icon_search"></i>', "                <span>商品搜索</span></a>", "            </li>", '            <li><a  data-href="http://wqs.jd.com/my/index.shtml?_wv=1&ptag=37128.1.4" needLogin="1">', '                <i class="icon_profile"></i>', "             ", "                <span>个人中心</span></a>", "            </li>", '            <li><a  data-href="http://wqs.jd.com/my/cart/jdshopcart.shtml?_wv=1&37128.1.11" needLogin="1">', '                <i class="icon_cart"></i>', "                <span>购物车</span></a>", "            </li>", '            <li><a  data-href="http://wqs.jd.com/my/fav/goods_fav.shtml?_wv=1&ptag=37128.1.5" needLogin="1">', '                <i class="icon_star"></i>', "                <span>我的收藏</span></a>", "            </li>", '            <li><a  href="http://wqs.jd.com/my/recently.shtml?_wv=1&ptag=37128.1.6">', '                <i class="icon_history"></i>', "                <span>最近浏览</span></a>", "            </li>", '            <li><a href="javascript:;" ptag="37128.1.7" id="__shareqq">', '                <i class="icon_qq"></i>', "                <span>QQ分享</span></a>", "            </li>", '            <li><a href="javascript:;" ptag="37128.1.8" id="__shareqzone">', '                <i class="icon_qzone"></i>', "                <span>空间分享</span></a>", "            </li>", '            <li><a ptag="7020.1.3" data-href="http://wqs.jd.com/my/membership/membership_edu.html?PTAG=7020.1.3">', '                <i class="icon_vip"></i>', "                <span>京东会员</span></a>", "            </li>", '            <li><a href="javascript:;"  ptag="37128.1.10" id="__returnToQQ">', '                <i class="icon_close"></i>', "                <span>关闭页面</span></a>", "            </li>", "        </ul>", '        <ul id="__ulqqmenu2">', "            <li>", '                <a  href="javascript:;" ptag="37128.1.2" id="__homepage2">', '                    <i class="icon_home"></i>', "                    <span>购物</span>", "                </a>", "            </li>", "            <li>", '                <a href="http://wqs.jd.com/portal/sq/category_q.shtml?_wv=1&ptag=37128.1.3">', '                    <i class="icon_search"></i>', "                    <span>商品搜索</span>", "                </a>", "            </li>", "            <li>", '                <a href="javascript:;"  data-href="http://wqs.jd.com/my/cart/jdshopcart.shtml?_wv=1&37128.1.11" needLogin="1">', '                    <i class="icon_cart"></i>', "                    <span>购物车</span>", "                </a>", "            </li>", "            <li>", '                <a href="javascript:;"  data-href="http://wqs.jd.com/my/index.shtml?_wv=1&ptag=37128.1.4" needLogin="1">', '                    <i class="icon_profile"></i>', "                    <span>个人中心</span>", "                </a>", "            </li>", "            <li>", '                <a href="javascript:;"  data-href="http://wqs.jd.com/my/fav/goods_fav.shtml?_wv=1&ptag=37128.1.5" needLogin="1">', '                    <i class="icon_star"></i>', "                    <span>我的收藏</span>", "                </a>", "            </li>", "            <li>", '                <a  href="http://wqs.jd.com/my/recently.shtml?_wv=1&ptag=37128.1.6">', '                    <i class="icon_history"></i>', "                    <span>最近浏览</span>", "                </a>", "            </li>", "            <li>", '                <a href="javascript:;"  ptag="37128.1.7" id="__sharemsg">', '                    <i class="icon_share"></i>', "                    <span>分享</span>", "                </a>", "            </li>", "        </ul>", "</div>"].join("")
	}

	function c() {
		function a(a) {
			return document.getElementById(a)
		}

		function b() {
			mqq.ui.setWebViewBehavior({
				swipeBack: 1
			})
		}

		function c() {
			mqq.device.getNetworkType(function(a) {
				try {
					var b;
					switch (1 * a) {
						case 0:
							b = a;
							break;
						case 1:
							b = "wifi";
							break;
						case 2:
							b = "2G";
							break;
						case 3:
							b = "3G";
							break;
						case 4:
							b = "4G"
					}
					JD.cookie.set("network", b, 2, "/", "jd.com")
				} catch (c) {}
			})
		}

		function d() {
			mqq.data.setShareInfo({
				share_url: m.link,
				title: m.title,
				desc: m.desc,
				image_url: m.img_url
			})
		}

		function e() {
			var b, c = a("_divqqmenu");
			l ? (k.className = "qq_menu_layer_v2", c.className = "qq_menu_v2", c.removeChild(a("__ulqqmenu")), b = a("__ulqqmenu2")) : (k.className = "qq_menu_layer", c.className = "qq_menu", c.removeChild(a("__ulqqmenu2")), b = a("__ulqqmenu")), k.addEventListener("click", function() {
				f()
			}), window.addEventListener("scroll", function() {
				f()
			}), mqq.ui.setActionButton(l ? {
				iconID: 3
			} : {
				title: "快捷入口"
			}, function() {
				k.style.display = "none" === k.style.display ? "" : "none"
			});
			var d = location.href,
				e = d.indexOf("http://wq.jd.com/mcoss/mportal/show?tabid=8&tpl=8") > -1 || d.indexOf("http://wq.jd.com/mcoss/mportal/show?tabid=6&tpl=7") > -1 || d.indexOf("http://wqs.jd.com/portal/sq/guang/guang_index.shtml") > -1;
			e ? b.removeChild(a(l ? "__homepage2" : "__homepage").parentNode) : JD.store.getCookie("wxsq_homepage", function(b, c) {
				a(l ? "__homepage2" : "__homepage").href = c || "http://wqs.jd.com/portal/sq/guang/guang_index.shtml"
			}), document.body.addEventListener("click", function(a) {
				var b, c = a.target;
				for (ck = JD.cookie; c && "a" !== c.nodeName.toLowerCase();) c = c.parentNode;
				c && (b = c.getAttribute("data-href")) && (c.getAttribute("needLogin") ? location.href = ck.get("wq_uin") && ck.get("wq_skey") ? b : "http://wq.jd.com/mlogin/h5v1/cpLogin_BJ?rurl=" + encodeURIComponent(b) : "1" == c.getAttribute("newview") ? mqq.ui.openUrl({
					url: b,
					target: 1,
					style: 0
				}) : location.href = b), f()
			})
		}

		function f() {
			k.style.display = "none"
		}

		function g(a) {
			var b = window.shareConfig ? window.shareConfig : m;
			b.link && -1 === b.link.indexOf("_share=") && (b.link += (-1 === b.link.indexOf("?") ? "?" : "&") + "_share=mq"), b.link && -1 === b.link.indexOf("_wv=") && (b.link += (-1 === b.link.indexOf("?") ? "?" : "&") + "_wv=1"), mqq.ui.shareMessage({
				title: b.title,
				desc: b.desc,
				share_type: a,
				share_url: JD.url.addRd(b.link, "17054.1.1"),
				image_url: b.img_url,
				back: !0,
				puin: 2712384158,
				sourceName: "京东购物"
			}, function(c) {
				var d = c && "0" == c.retCode ? "ok" : "cancel",
					e = ["ShareToQQ", "ShareToQzone", "ShareToWX", "ShareToPYQ"][a];
				b.shareCallback && b.shareCallback(e, d, c.retCode)
			}), f()
		}

		function h() {
			l ? a("__sharemsg").addEventListener("click", function() {
				mqq.ui.showShareMenu(), mqq.ui.setOnShareHandler(function(a) {
					g(a)
				})
			}) : (a("__shareqq").addEventListener("click", function() {
				g(0)
			}), a("__shareqzone").addEventListener("click", function() {
				g(1)
			}), a("__returnToQQ").addEventListener("click", function() {
				mqq.ui.popBack()
			}))
		}

		function i(a) {
			var b, c = {
					style1: {
						domId: "sqred_style1",
						tpl: '<div id="landing_layer" style="position:fixed;z-index:1001;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.8);"> <div style="width:68.44%;height:0;padding-top:102%;margin:0 auto;position:relative; background:transparent url({#img#}) no-repeat center top; background-size:100%; "> <div style="position: absolute;left: 21%;right: 14%;top: 68%;text-align:center; color:white;font-size:12px;line-height:18px;height:36px;overflow:hidden; ">{#content#}<br>快来看看吧~</div> <div class="go" style="position:absolute;left: 26%;right: 19%;top: 85.85%;color:white; height:16px;line-height:16px;font-size:16px;text-align:center;"> 进来逛逛 <i style="display:inline-block;width:14px;height:14px;vertical-align:middle;margin-top:-3px; background:transparent url(http://img11.360buyimg.com/jdphoto/s28x28_jfs/t799/63/1093794393/360/bfbd1bc2/557101d4N7e09eb68.png) no-repeat; background-size:100%;"></i> </div> </div></div>'
					},
					style2: {
						domId: "sqred_style2",
						tpl: '<div class="qq_msg_dot"><a href="{#link#}"><img src="{#img#}"><span>{#content#}</span></a></div>',
						tpl2: '<div class="qq_msg_dot dot"><a href="{#link#}"><img src="{#img#}"><span>{#content#}</span></a></div>'
					}
				},
				d = parseInt(10 * Math.random()) < 10 ? c.style2 : c.style1;
			d = "1" == JD.url.getUrlParam("style") ? c.style1 : c.style2, b = document.getElementById(d.domId), b && (d.tpl = parseInt(10 * Math.random()) < 0 ? d.tpl : d.tpl2, b.innerHTML = d.tpl.replace("{#img#}", a.img).replace("{#content#}", a.content).replace(/{#link#}/g, a.link), b.style.display = "", "sqred_style1" == d.domId && b.addEventListener("touchstart", function(c) {
				-1 !== c.target.className.indexOf("go") ? location.href = a.link : b.remove(document.getElementById("landing_layer")), c.preventDefault(), c.stopPropagation()
			}))
		}

		function j() {
			var a, b = document.getElementById("sqred_style2");
			if (b) try {
				mqq.redpoint.getNewMsgList({
					path: mqq.iOS ? "857" : "856"
				}, function(b) {
					"0" == b.ret && (a = b.list.pop(), a && a.content && (i(a), JD.report.rd("7060.1.1"), JD.report.redpointPtag = 285 == a.id ? "17012.8.1" : "17050.7.1", JD.events.trigger("EVENT_REDPOINTPTAG")))
				})
			} catch (c) {}
		}
		console.log("qq api.."), JD && JD.events.trigger("sq_api_ready");
		var k = a("__mqqmenu"),
			l = !1,
			m = {
				img_url: "http://pics1.paipaiimg.com/update/20140725/index_143554377.jpg",
				img_width: 80,
				img_heigth: 80,
				link: "http://wq.jd.com/mcoss/mportal/show?tabid=8&tpl=8",
				title: "超划算，超值京品",
				desc: "最实惠的价格、最优质的商品，精彩不断！",
				clkPtag: ""
			};
		mqq.device.isMobileQQ(function(a) {
			a && (l = mqq.compare("5.3") >= 0, b(), c(), j(), mqq.compare("4.7.2") < 0 ? d() : (e(), h()), mqq.ui && (mqq.ui.showOfficalAccountDetail = mqq.ui.showOfficialAccountProfile))
		}), JD.url.getUrlParam("debugred") && i({
			img: "http://img11.360buyimg.com/jdphoto/s80x80_jfs/t1351/4/543407132/3803/cf72bbd3/559212a2N7484d2bd.png",
			link: "http://www.sohu.com",
			content: "test..test"
		})
	}
	document.getElementById("__mqqmenu") && (document.getElementById("__mqqmenu").innerHTML = b());
	try {
		a("http://wq.360buyimg.com/fd/sq/css/common/qq_menu_layer.s.min.css?t=201510223"), JD.sendJs("http://pub.idqqimg.com/qqmobile/qqapi.js?_bid=152", {
			onLoad: function() {
				c()
			}
		})
	} catch (d) {}
}();