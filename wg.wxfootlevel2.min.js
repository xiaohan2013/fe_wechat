! function() {
	function a(a, b) {
		a.href = JD.url.addRd(a.href, b)
	}

	function b(a) {
		var b = a.style.display;
		"none" == b && (a.style.display = "");
		var c = a.getBoundingClientRect(),
			d = c.height ? c.height : c.bottom - c.top;
		return a.style.display = b, d
	}

	function c() {
		if (!s) {
			var a = document.createElement("div");
			if (a.innerHTML = r.replace("{#placeholder#}", p.placeholder ? p.placeholder : "").replace("{#btnPtag#}", p.btnPtag ? p.btnPtag : "").replace("{#inpRd#}", p.inpPtag ? p.inpPtag : ""), p.con) {
				var b = document.getElementById(p.con || "searchfoot");
				b && b.appendChild(a)
			} else document.body.appendChild(a);
			d(), e(), g(), s = !0
		}
	}

	function d() {
		var a = document.getElementById("search_foot_btn"),
			b = document.getElementById("search_foot_keyword");
		a && a.addEventListener("click", function() {
			f(b.value)
		});
		var c = document.getElementById("btmSearchForm");
		c.addEventListener("submit", function(a) {
			a.preventDefault(), f(b.value)
		}), w.addEventListener("click", function() {
			x.setAttribute("class", "mod_foot_layer show")
		}), y.addEventListener("click", function() {
			x.setAttribute("class", "mod_foot_layer")
		});
		var d = !1,
			e = !1;
		document.addEventListener("touchstart", function(a) {
			e = a.target != b ? !0 : !1
		}, !1), b.addEventListener("focus", function() {
			var a = b.getAttribute("chnname");
			a && b.setAttribute("placeholder", a), d = !0, window.setTimeout(function() {
				d = !1
			}, 500)
		}), b.addEventListener("blur", function() {
			var a = b.getAttribute("chnname");
			a && b.setAttribute("placeholder", "搜索更多 " + a + " 相关商品")
		}), window.addEventListener("scroll", function() {
			d || document.activeElement && document.activeElement === b && !0 === e && b.blur()
		});
		var h = document.getElementById("search_foot_suggest");
		h.addEventListener("click", function(a) {
			var b = a.target;
			if ("a" == b.tagName.toLowerCase() || "span" == b.tagName.toLowerCase()) {
				~b.className.indexOf("refresh") ? g() : p.autoSt && k();
				var c = b.getAttribute("tourl");
				c && window.setTimeout(function() {
					location.href = c
				}, 200)
			}
		})
	}

	function e() {
		if (p.brandId) {
			var a = "http://bases.wanggou.com/mcoss/brand/query?callback=searBtnBrandCb&bids=" + p.brandId + "&platform=" + (2 === p.index ? 1 : 2);
			window.searBtnBrandCb = function(a) {
				if (0 === a.errno && a.brand && 0 != a.brand.length) {
					var b = a.brand[0],
						c = document.getElementById("search_foot_keyword");
					b.chn_name && (c.setAttribute("placeholder", "搜索更多 " + b.chn_name + " 相关商品"), c.setAttribute("chnname", b.chn_name)), t = !0
				}
			};
			try {
				JD.sendJs(a)
			} catch (b) {}
		}
	}

	function f(a) {
		var a = a.replace(/^\s*|\s*$/g, "");
		if ("" === a && p.brandId && t) {
			var b = document.getElementById("search_foot_keyword");
			a = b.getAttribute("chnname") || ""
		}
		"" !== a && (p.autoSt && k(a), i(), window.setTimeout(function() {
			location.href = JD.url.addRd("http://wqs.jd.com/search/index.shtml?key=" + encodeURIComponent(a) + "&as=1", p.searchrd ? p.searchrd : "37128.7.12")
		}, 100))
	}

	function g() {
		if (p.mpj) {
			var a = "http://wq.360buyimg.com/data/coss/keyword/project/" + p.mpj + ".jsonp?t=" + parseInt((new Date).getTime() / 864e5, 10),
				c = p.mpj.replace(/^m/, ""),
				d = document.getElementById("search_foot_suggest");
			d.style.maxHeight = "none", window[c] = function(a) {
				if (0 == a.errCode) {
					var c = [],
						e = [];
					if (a.keywordAreas)
						for (var f = 0, g = a.keywordAreas.length; g > f; ++f) {
							var h = a.keywordAreas[f];
							if (h && h.level1words)
								for (var i = 0, j = h.level1words.length; j > i; ++i) e = e.concat(h.level1words[i].level2words)
						}
					e.sort(function() {
						return parseInt(10 * Math.random() - 5, 10)
					});
					var k = 10;
					p.hotLimit && (k = parseInt(p.hotLimit || 10, 10));
					for (var e = e.slice(0, k), f = 0, g = e.length; g > f; ++f) {
						var l = e[f];
						p.hotrd && (l.url = JD.url.addRd(l.url, p.hotrd)), c.push('<li><a href="javascript:" tourl="' + l.url + '">' + l.keyword + "</a></li>")
					}
					c.length > 0 && (p.changerd = p.changerd || p.changeRd, c.push('<li><span class="mark_refresh" ptag=' + (p.changerd ? p.changerd : "37128.7.13") + " >换一批</span></li>"), d.innerHTML = c.join(""), d.style.display = "", d.style.maxHeight = b(d) + "px")
				}
			};
			try {
				JD.sendJs(a, {
					charset: "gbk"
				})
			} catch (e) {}
		}
	}

	function h() {
		var a = document.body.scrollTop,
			b = document.body.scrollHeight,
			d = window.screen.availHeight;
		a >= b - d - 180 && (window.removeEventListener("scroll", h), document.getElementById("foot_wx_level2").style.display = "", c())
	}

	function i() {
		if (p.searchrd) try {
			ECC.cloud.report.trace({
				ptag: p.searchrd
			}), window.ja.log("wg_wx.000001", {
				logid: window.jdPvLog.envData.logid,
				target: p.searchrd
			})
		} catch (a) {}
	}

	function j() {
		var a = JD.url.getHashParam("st");
		a > 0 && (c(), window.setTimeout(function() {
			window.scrollTo(0, a)
		}, 50))
	}

	function k() {
		var a = JD.url.getHash(),
			b = JD.url.getHashParam("st");
		a = b ? a.replace(/st=\d+/, "st=" + document.body.scrollTop) : a + (a ? "&" : "") + "st=" + document.body.scrollTop, JD.url.setHash(a)
	}

	function l() {
		window.closeSearchEntrance || (p.load = c, !0 !== p.manual && (window.addEventListener("scroll", h), h()), p.autoSt && j())
	}

	function m() {
		for (var b = window._wxfootconfig.hot, c = 0, d = v.length; d > c; c++) {
			var e = v[c];
			a(e, b[e.getAttribute("tag")])
		}
		w.setAttribute("ptag", b.accountrd)
	}

	function n(a) {
		if (a) document.getElementById("erweima_img").setAttribute("src", a);
		else {
			var b = {
					digit_mall: "http://img11.360buyimg.com/jdphoto/s135x135_jfs/t1600/287/1289489576/46514/8b55a474/55c2d092Naa0ebd84.jpg",
					jiadianguan: "http://img11.360buyimg.com/jdphoto/s135x135_jfs/t1576/210/1254908966/46632/bdcd8740/55c2d0a1Nc6a5887e.jpg",
					yundongguan: "http://img11.360buyimg.com/jdphoto/s135x135_jfs/t1417/256/1269964349/46218/3521724f/55c2d0c2Nec1065bd.jpg",
					microstore_theme: "http://img11.360buyimg.com/jdphoto/s292x285_jfs/t1663/278/1456005897/28340/46bb471c/55cade45N91e62cf2.jpg",
					ju_miao: "http://img11.360buyimg.com/jdphoto/s135x135_jfs/t1618/265/1285116565/46539/a716a1b7/55c3239fN64f5d4a9.jpg",
					12: "http://img11.360buyimg.com/jdphoto/s135x135_jfs/t1432/84/1280019931/46616/2e6191e9/55c2d0afNbc98acaa.jpg",
					pinpai: "http://img11.360buyimg.com/jdphoto/s135x135_jfs/t1375/314/1303075731/46397/dae62158/55c2d0f1Nbeaafced.jpg",
					jdc: "http://img11.360buyimg.com/jdphoto/s135x135_jfs/t1621/8/1306974675/46309/d2488484/55c2f9efNe82763d4.jpg"
				},
				c = location.href,
				d = "";
			if (c.indexOf("portal/wx") > -1 && -1 == c.indexOf("microstore_theme")) {
				var e = c.indexOf("/wx/") + 4,
					f = c.indexOf(".shtml");
				d = c.substring(e, f)
			} else c.indexOf("mportal/show") > -1 && c.indexOf("tabid=12") > -1 ? d = "12" : c.indexOf("microstore_theme") > -1 ? d = "microstore_theme" : c.indexOf("wq.jd.com/mcoss/mmart/show") > -1 ? d = "pinpai" : c.indexOf("wqs.jd.com/event") > -1 && "object" == typeof widget && (d = "jdc");
			d && b[d] && document.getElementById("erweima_img").setAttribute("src", b[d])
		}
	}

	function o() {
		var a = ["http://wq.360buyimg.com/data/coss/tolerant/new/5_1.shtml", "http://wq.360buyimg.com/data/coss/tolerant/new/6_1.shtml", "http://wq.360buyimg.com/data/coss/tolerant/new/7_1.shtml", "http://wq.360buyimg.com/data/coss/tolerant/new/8_1.shtml"];
		window.hot = window.hot || document.querySelector("#foot_wx_level2").querySelector(".mod_foot_column").children;
		var b = location.href;
		if (b.indexOf("http://wqs.jd.com/data/coss/tolerant") > -1)
			for (var c = 0, d = v.length; d > c; c++) v[c].href = a[c].replace("new", b.indexOf("new") > -1 ? "new" : "old").replace("wq.360buyimg.com", "wqs.jd.com");
		else JD.disasterRecovery.mportal.useStaticUrl && (v[1].href = "http://wqs.jd.com/data/coss/recovery/mportal2/0/bb7233f97c00d1e75c28dbce296fdb31.shtml?tpl=14&tabid=5&ptag=37035.8.1", v[2].href = "http://wqs.jd.com/data/coss/recovery/mportal2/0/73cf624f78f45d84078e9c16478e0eeb.shtml?tabid=9&tpl=9&ptag=37035.8.2")
	}
	window._wxfootconfig = window._wxfootconfig || {
		hot: {
			xinrd: "",
			brandrd: "",
			juhuird: "",
			microstorerd: ""
		},
		search: {
			index: 2,
			con: "searchfoot",
			placeholder: "搜索更多喜欢的商品",
			searchrd: "",
			brandId: "",
			hotrd: "",
			btnPtag: "",
			inpPtag: "",
			mpj: window._wxfootmpj || "mpj118",
			manual: !1
		}
	};
	var p = window._wxfootconfig.search || window._wxfootconfig.searchfoot,
		q = window._wxfootconfig.erweimaurl || "",
		r = '<div class="form"><form id="btmSearchForm"><input class="text" id="search_foot_keyword" type="search" autocomplete="off" placeholder="{#placeholder#}" ptag="{#inpRd#}"><input class="btn" type="button" id="search_foot_btn" ptag="{#btnPtag#}" value="搜索"></div></form></div><ul class="tags" id="search_foot_suggest" style="display:none;"></ul>',
		s = !1,
		t = !1,
		u = document.querySelector("#foot_wx_level2"),
		v = u.querySelector(".mod_foot_column").children,
		w = u.querySelector(".mod_foot_follow a"),
		x = u.querySelector("#erweima"),
		y = u.querySelector(".close"),
		z = document.createElement("link");
	z.rel = "stylesheet", z.href = "http://wq.360buyimg.com/c/=/fd/base/css/base/mod_foot.s.min.css?t=1442388178", document.getElementsByTagName("head")[0].appendChild(z), o(), m(), l(), n(q)
}();