! function() {
	function a(a) {
		var b = "_SPEEDPOINT" + Math.random();
		window[b] = new Image, window[b].src = a
	}

	function b(b) {
		function c(a) {
			a && (a = a.toLowerCase(), "wifi" == a ? d(g[0], g[1], g[2], a) : "2g" == a || "3g" == a ? d(g[3], g[4], g[5], a) : "4g" == a || "3g+" == a ? g.length > 9 && d(g[9], g[10], g[11], a) : d(g[6], g[7], g[8], a))
		}

		function d(b, c, d, f) {
			for (var g = {
					flag1: b,
					flag2: c,
					flag3: d
				}, j = 1; j < e.length; j++) e[j] && (g[j] = e[j] - e[0][0]);
			i.t = Math.random(), f && (i.apn = f), i.speedparams = l(g), a(h + "?" + l(i)), e.hasReport = !0
		}
		var e = b || window.speedTimePoint,
			f = 0;
		if (e && -1 !== e.rptTime && !e.hasReport && !window.MANUAL_SPEED && !e.manualReport && e.huatuoReport) {
			var g = e[0].slice(1),
				h = "http://report.huatuo.qq.com/report.cgi",
				i = {
					appid: 20001,
					appkey: "",
					speedparams: null,
					platform: n.os ? n.os.replace(/%20/g, "") : "other",
					t: 0
				};
			e.rptTime > 0 && (f = e.rptTime), setTimeout(function() {
				e.diffNetwork ? JD.device.getNetwork(function(a) {
					c(a)
				}) : d(g[0], g[1], g[2])
			}, f)
		}
	}

	function c() {
		if (window.performanceTimePoint) {
			var b, c, d, e, f = window.performanceTimePoint,
				g = window.webkitPerformance || window.performance,
				h = ["navigationStart", "unloadEventStart", "unloadEventEnd", "redirectStart", "redirectEnd", "fetchStart", "domainLookupStart", "domainLookupEnd", "connectStart", "connectEnd", "requestStart", "responseStart", "responseEnd", "domLoading", "domInteractive", "domContentLoadedEventStart", "domContentLoadedEventEnd", "domComplete", "loadEventStart", "loadEventEnd"];
			if (g && (b = g.timing)) {
				e = {
					flag1: f[0],
					flag2: f[1],
					flag3: f[2]
				}, c = b[h[0]];
				for (var i = 1, j = h.length; j > i; i++) d = b[h[i]], d = d ? d - c : 0, d > 0 && (e[i] = d);
				var k = {
					appid: 20001,
					appkey: "",
					speedparams: l(e),
					platform: n.os ? n.os.replace(/%20/g, "") : "other",
					apn: JD.cookie.get("network"),
					t: Math.random()
				};
				a("http://report.huatuo.qq.com/report.cgi?" + l(k))
			}
		}
	}

	function d() {
		var b = JD.url.getUrlParam("pps");
		b && a("http://wq.jd.com/mcoss/rpds/report?pps=" + b + "&t=" + Math.random())
	}

	function e() {
		function a(a) {
			for (var b = a.target, c = 0; b && b.tagName && 8 > c && "a" != b.tagName.toLowerCase();) b = b.parentNode, c++;
			return b
		}
		if (window._useStaticItemLink) {
			var b = JD.cookie.get("visitkey"),
				c = function(a) {
					return Math.floor(Math.random() * a)
				},
				d = b ? b % 10 < window._staticItemLinkRate : c(10) < window._staticItemLinkRate;
			d && document.body.addEventListener("click", function(b) {
				var c = a(b);
				c && "a" == c.tagName.toLowerCase() && c.href.indexOf("http://wq.jd.com/item/view") > -1 && (c.href = c.href.replace("http://wq.jd.com/item/view", "http://wqs.jd.com/item/jd.shtml"))
			}, !1)
		}
		window.JD && JD.disasterRecovery && JD.disasterRecovery.mportal.useStaticUrl && document.body.addEventListener("click", function(b) {
			var c = a(b);
			if (c && c.tagName && "a" == c.tagName.toLowerCase() && c.href.indexOf("://wq.jd.com/mcoss/mportal/show") > -1) {
				var d = JD.url.getUrlParam("tabid", c.href),
					e = {
						13: "//wqs.jd.com/data/coss/recovery/mportal2/0/014c49a039e89dd799a8edba0655523d.shtml?tabid=13&tpl=13&PTAG=17053.1.1",
						14: "//wqs.jd.com/data/coss/recovery/mportal2/0/d1cd7ec027afdfe7e00768a0942f67af.shtml?tpl=15&tabid=14&ptag=37035.8.3",
						5: "//wqs.jd.com/data/coss/recovery/mportal2/0/bb7233f97c00d1e75c28dbce296fdb31.shtml?tpl=14&tabid=5&ptag=37035.8.1",
						9: "//wqs.jd.com/data/coss/recovery/mportal2/0/73cf624f78f45d84078e9c16478e0eeb.shtml?tabid=9&tpl=9&ptag=37035.8.2",
						6: "//wqs.jd.com/data/coss/recovery/mportal2/0/0b13a4f358bbdfe39fd9d7ad36410854.shtml?tabid=6&tpl=7&ptag=37128.3.3",
						8: "//wqs.jd.com/data/coss/recovery/mportal2/0/2aa3a4184ed8b577996e03812651b014.shtml?tabid=8&tpl=8&eday=1&ptag=37128.3.2"
					}[d];
				e && (c.href = e)
			}
		}, !1)
	}

	function f() {
		JD.cookie.get("wq_code") && ("weixin" == JD.device.scene && !JD.cookie.get("open_id") || "qq" == JD.device.scene && !JD.cookie.get("sq_open_id")) && a("http://wq.jd.com/mcoss/openid/getopenid?t=" + Math.random())
	}

	function g() {
		var a = window.webkitPerformance || window.performance;
		if (a && a.getEntriesByType) {
			var b = {
					6: 1,
					8: 2,
					guang_index: 3,
					14: 4,
					5: 5,
					9: 6,
					microstore: 7
				},
				c = "";
			if ("wqs.jd.com" == location.host) {
				var d = location.pathname.match(/\w*(?=\.(shtml|html))/);
				d && d.length && (c = d[0])
			} else c = JD.url.getUrlParam("tabid");
			if (c) {
				var e = b[c];
				if (e) {
					var d = a.getEntriesByType("resource").filter(function(a) {
						return "link" == a.initiatorType
					});
					if (d.length) {
						var f = d[0],
							g = f.duration < 5;
						JD.report.umpBiz({
							bizid: 43,
							operation: e,
							result: g ? 0 : 1,
							source: 0,
							message: g ? "" : "load from server"
						})
					}
				}
			}
		}
	}

	function h() {
		var a;
		if ("wqs.jd.com" == location.host) {
			var b = location.pathname.match(/\w*(?=\.(shtml|html))/);
			b && b.length && (a = b[0])
		} else a = JD.url.getUrlParam("tabid");
		if (a) {
			var c = ["6", "8", "guang_index", "14", "5", "9", "microstore"];
			if (!(c.indexOf(a) < 0)) {
				var d = document.createElement("div");
				d.className = "loadcsstest", document.body.appendChild(d);
				var e = d.getBoundingClientRect().width;
				100 != e && JD.report.umpBiz({
					bizid: 44,
					operation: 1,
					result: 1,
					source: 0,
					message: "css load failed"
				}), document.body.removeChild(d)
			}
		}
	}

	function i() {
		var a = Math.random() < .2,
			b = document.cookie.length,
			c = 2;
		b >= 1e3 && 2e3 > b ? c = 3 : b >= 2e3 && 3e3 > b ? c = 4 : b >= 3e3 && (c = 5), 5 > c && !a || location.href.indexOf("http://wqs.jd.com/error.shtml") > -1 || JD.report.umpBiz({
			bizid: 60,
			operation: 1,
			result: c,
			source: 0,
			message: b + ""
		})
	}

	function j() {
		if (window.JD && JD.preload)
			for (var b in JD.preload) JD.preload.hasOwnProperty(b) && a(JD.preload[b])
	}

	function k() {
		try {
			var a = navigator.userAgent,
				b = {},
				c = {},
				d = {},
				e = {},
				f = a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),
				g = a.match(/(Android);?[\s\/]+([\d.]+)?/),
				h = !!a.match(/\(Macintosh\; Intel /),
				i = a.match(/(iPad).*OS\s([\d_]+)/),
				j = a.match(/(iPod)(.*OS\s([\d_]+))?/),
				k = !i && a.match(/(iPhone\sOS)\s([\d_]+)/),
				l = a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),
				m = a.match(/Windows Phone ([\d.]+)/),
				n = l && a.match(/TouchPad/),
				o = a.match(/Kindle\/([\d.]+)/),
				p = a.match(/Silk\/([\d._]+)/),
				q = a.match(/(BlackBerry).*Version\/([\d.]+)/),
				r = a.match(/(BB10).*Version\/([\d.]+)/),
				s = a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),
				t = a.match(/PlayBook/),
				u = a.match(/Chrome\/([\d.]+)/) || a.match(/CriOS\/([\d.]+)/),
				v = a.match(/Firefox\/([\d.]+)/),
				w = a.match(/MSIE\s([\d.]+)/) || a.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),
				x = !u && a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),
				y = x || a.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);
			(d.webkit = !!f) && (d.version = f[1]), g && (b.android = !0, b.version = g[2]), k && !j && (b.ios = e.iphone = !0, b.version = k[2].replace(/_/g, ".")), i && (b.ios = e.ipad = !0, b.version = i[2].replace(/_/g, ".")), j && (b.ios = e.ipod = !0, b.version = j[3] ? j[3].replace(/_/g, ".") : null), m && (b.wp = !0, b.version = m[1]), l && (b.webos = !0, b.version = l[2]), n && (e.touchpad = !0), q && (b.blackberry = !0, b.version = q[2]), r && (b.bb10 = !0, b.version = r[2]), s && (b.rimtabletos = !0, b.version = s[2]), t && (c.playbook = !0), o && (b.kindle = !0, b.version = o[1]), p && (c.silk = !0, c.version = p[1]), !p && b.android && a.match(/Kindle Fire/) && (c.silk = !0), u && (c.chrome = !0, c.version = u[1]), v && (c.firefox = !0, c.version = v[1]), w && (c.ie = !0, c.version = w[1]), y && (h || b.ios) && (c.safari = !0, h && (c.version = y[1]));
			var z = "Unknown",
				A = "",
				B = "",
				C = "",
				D = /(^\s+)|(\s+$)/g,
				E = function(a) {
					return a.trim ? a.trim() : a.replace(D, "")
				};
			for (var F in e) z = F;
			for (var F in b) "version" != F && (A = F + " " + (b.version || ""));
			for (var F in c) "version" != F && (B = F + " " + (c.version || ""));
			for (var F in d) "version" != F && (C = F + " " + (d.version || ""));
			return B += " " + C, this.phone = E(z), this.os = E(A), this.browser = E(B).split("  ").join(" "), {
				os: this.os,
				browser: this.browser,
				engine: this.engine,
				phone: this.device
			}
		} catch (C) {}
	}

	function l(a) {
		var b = [];
		for (var c in a) a.hasOwnProperty(c) && b.push(c + "=" + encodeURIComponent(a[c]));
		return b.join("&")
	}

	function m() {
		var a = window.objMsgPv || window.objMsg || {};
		a.p = "paipai.com", a.weixin = 1, a.retina = window.devicePixelRatio >= 1.5 ? 1 : 0, "qq" === FOOTDETECT.scene ? a.client = 2001 : "weixin" === FOOTDETECT.scene ? a.client = 1001 : (a.client = 4001, FOOTDETECT.network = "Unknown"), k.call(a);
		for (var b in a) a[b] = encodeURIComponent(a[b]);
		return a.network = FOOTDETECT.network || "", a.webp = JD.device.webp, a
	}
	var n = m();
	FOOTDETECT.rptPvObj = n, FOOTDETECT.objMsgPv = n, b(), d(), e(), f(), setTimeout(g, 200), setTimeout(h, 300), setTimeout(j, 2e3), setTimeout(c, 3e3), setTimeout(i, 3e3)
}();