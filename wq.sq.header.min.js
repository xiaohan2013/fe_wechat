! function() {
	function $id(a) {
		return document.getElementById(a)
	}

	function setTabNav() {
		function a(a) {
			JD.calendar.period_26_31 && document.querySelector(".icon_orange_bubble") && (document.querySelector(".icon_orange_bubble").style.display = a ? "" : "none")
		}

		function b() {
			window.scrollY > m ? JD.device.sticky ? a(!1) : -1 === k.className.indexOf("QQ_tab_fixed") && (k.className += " QQ_tab_fixed", a(!1)) : JD.device.sticky ? a(!0) : k.className.indexOf("QQ_tab_fixed") > -1 && (k.className = k.className.replace(" QQ_tab_fixed", ""), a(!0))
		}
		var c = JD.url.getUrlParam("title") || "";
		if (c) return document.querySelector("#__qqtab").style.display = "none", document.title = decodeURIComponent(c), void(document.querySelector(".QQ_bar_cate").className = "QQ_bar_cate no_bottom_arrow");
		setHomepage();
		var d = document.querySelector(".J_viewData") ? JSON.parse(document.querySelector(".J_viewData").value) : {
				viewData: 3
			},
			e = $id("__chaoTab"),
			f = $id("__shuaTab"),
			g = $id("__guangTab"),
			h = $id("__yearTab"),
			i = $id("__funcs"),
			j = document.querySelector(".QQ_tab_more"),
			k = document.querySelector(".QQ_tab"),
			l = k.querySelector(".QQ_tab_wrap"),
			m = 45;
		3 == d.tab ? e.className = "on" : 2 == d.tab ? f.className = "on" : 4 == d.tab || 5 == d.tab ? (h.className = "on", window.__tab = d.tab) : g.className = "on", i.addEventListener("touchstart", function() {
			"QQ_tab_more" === j.className ? (j.className = "QQ_tab_more hide", l.className = "QQ_tab_wrap") : (j.className = "QQ_tab_more", l.className = "QQ_tab_wrap expanded")
		}), setTimeout(function() {
			var a = document.querySelector(".wx_wrap");
			a && a.addEventListener("click", function() {
				j.className = "QQ_tab_more hide", l.className = "QQ_tab_wrap"
			})
		}, 500), document.addEventListener("touchmove", function() {
			b(), j.className = "QQ_tab_more hide", l.className = "QQ_tab_wrap"
		}), document.addEventListener("scroll", function() {
			!JD.device.sticky && b(), j.className = "QQ_tab_more hide", l.className = "QQ_tab_wrap"
		})
	}

	function showfootAd() {
		function moveAd(a, b) {
			curtainAdInner.style["-webkit-transition"] = "-webkit-transform " + a + "s ease-in-out", curtainAdInner.style["-webkit-transform"] = "translateX(" + b + "px)"
		}

		function initStyle() {
			moveAd(0, iInitWidth), curtainAdInner.innerHTML = ' <img style="display:block;width:100%;" src="' + curAdData.urlImg1 + '" alt=""/><a class="gg" style="position:absolute;left:0;top:0;bottom:0;right:30px;" href="' + curAdData.link + '"></a><a class="close" style="position:absolute;top:0;right:0;width:30px;height:30px;background:rgba(0,0,0,.51) url(http://pics0.paipaiimg.com/update/20150122/index_clpose.fw.png) no-repeat center center;background-size:12px 12px;" href="javascript:;"></a>', btnSmallBtn.innerHTML = '<img src="' + curAdData.urlImg2 + '">'
		}

		function showCloseBtn(a) {
			var b = 1 * curtainAdInner.style["-webkit-transform"].match(/\d+(\.\d+)?/g)[0];
			btnSmallBtn.className = b > 0 && !a ? "act_fixedLink show" : "act_fixedLink"
		}

		function changeDisaster() {}

		function bindAdEvent() {
			btnSmallBtn.addEventListener("click", function(a) {
				return wxNav && (wxNav.style.display = "none"), showCloseBtn(!0), moveAd(1, 0), JD.report.rd("7168.1.1"), hideCutain(), a.preventDefault && a.preventDefault(), !1
			}, !1), curtainAdInner.addEventListener("webkitTransitionEnd", function() {
				showCloseBtn()
			}, !1), curtainAdInner.querySelector(".close").addEventListener("click", function(a) {
				return moveAd(1, iWidth + 160), a.preventDefault && a.preventDefault(), !1
			}, !1)
		}

		function hideCutain() {
			setTimeout(function() {
				moveAd(1, iWidth + 160)
			}, 1e4)
		}
		document.getElementById("ppmsFootAd") && eval("" + document.getElementById("ppmsFootAd").innerHTML);
		var now = new Date,
			curAdData, iHeight, curtainAdShow = JD.cookie.get("ckfootAdShow"),
			curtainAd = document.getElementById("curtainFoot"),
			curtainAdInner = document.getElementById("curtainFootInner"),
			btnSmallBtn = document.querySelector(".act_fixedLink"),
			regDate = /-/g,
			wxNav = document.querySelector(".QQ_fixed_foot");
		if (!shouq_footad) return !1;
		for (var i = 0, j = shouq_footad.length; j > i; i++)
			if (now >= new Date(shouq_footad[i].startTime.replace(regDate, "/")) && now < new Date(shouq_footad[i].endTime.replace(regDate, "/"))) {
				curAdData = shouq_footad[i];
				break
			}
		if (curAdData) {
			iWidth = 313 * document.documentElement.clientHeight / 640;
			var iInitWidth = iWidth;
			curtainAdShow ? (iInitWidth = iWidth + 160, initStyle(), showCloseBtn()) : (initStyle(), JD.cookie.set("ckfootAdShow", 1, Math.round((new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1) - now) / 6e4), "/", "jd.com"), setTimeout(function() {
				wxNav && (wxNav.style.display = "none"), moveAd(1, 0)
			}, 0), hideCutain()), bindAdEvent()
		}
	}

	function setHomepage() {
		JD.store.setCookie("wxsq_homepage", location.href, 5)
	}

	function checkNewAndRedPoint() {
		var a, b, c, d, e;
		for (g_redpoint_setting.length > 0 && (a = "rp_" + g_redpoint_setting[0].key, JD.cookie.get(a) || (b = document.querySelector(".expand_icon"), c = b.className, b.className = c + " dot", b.addEventListener("touchstart", function() {
				JD.cookie.set(a, 1, 1440 * g_redpoint_setting[0].days, "/", "jd.com"), b.className = c
			}))), d = document.querySelector(".more_con").children, e = 0; e < d.length; e++) "1" == d[e].getAttribute("showstrong") && (d[e].className = "new")
	}

	function showOther() {
		showfootAd(), checkNewAndRedPoint()
	}
	setTabNav(), /complete|loaded|interactive/.test(document.readyState) ? showOther() : document.addEventListener("DOMContentLoaded", function() {
		showOther()
	}, !1)
}();